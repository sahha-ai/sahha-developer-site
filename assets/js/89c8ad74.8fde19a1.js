"use strict";(self.webpackChunksahha_developer_site=self.webpackChunksahha_developer_site||[]).push([[6118],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>m});var i=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t){if(null==e)return{};var a,i,r=function(e,t){if(null==e)return{};var a,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)a=l[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=i.createContext({}),p=function(e){var t=i.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},h=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,h=n(e,["components","mdxType","originalType","parentName"]),c=p(a),u=r,m=c["".concat(s,".").concat(u)]||c[u]||d[u]||l;return a?i.createElement(m,o(o({ref:t},h),{},{components:a})):i.createElement(m,o({ref:t},h))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=u;var n={};for(var s in t)hasOwnProperty.call(t,s)&&(n[s]=t[s]);n.originalType=e,n[c]="string"==typeof e?e:r,o[1]=n;for(var p=2;p<l;p++)o[p]=a[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}u.displayName="MDXCreateElement"},31744:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>n,toc:()=>p});var i=a(87462),r=(a(67294),a(3905));const l={sidebar_position:2,slug:"apple-health"},o="Apple Health",n={unversionedId:"health-systems/apple-health",id:"health-systems/apple-health",title:"Apple Health",description:"These Sahha SDK collects health data from Apple Health.",source:"@site/docs/health-systems/apple-health.md",sourceDirName:"health-systems",slug:"/health-systems/apple-health",permalink:"/docs/health-systems/apple-health",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,slug:"apple-health"},sidebar:"docsSidebar",previous:{title:"Android Health Connect",permalink:"/docs/health-systems/android-health-connect"},next:{title:"Health Software Designation",permalink:"/docs/health-systems/health-software-designation"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Enable HealthKit",id:"enable-healthkit",level:2},{value:"Step 1",id:"step-1",level:3},{value:"Step 2",id:"step-2",level:3},{value:"Step 3",id:"step-3",level:3},{value:"Step 4",id:"step-4",level:3},{value:"Background Delivery",id:"background-delivery",level:2},{value:"Background Modes",id:"background-modes",level:2},{value:"Step 1",id:"step-1-1",level:3},{value:"Step 2",id:"step-2-1",level:3},{value:"Step 3",id:"step-3-1",level:3},{value:"Step 4",id:"step-4-1",level:3},{value:"Request access",id:"request-access",level:2},{value:"30-day read restriction",id:"30-day-read-restriction",level:2},{value:"Example",id:"example",level:3},{value:"Locked restriction",id:"locked-restriction",level:2}],h={toc:p},c="wrapper";function d(e){let{components:t,...l}=e;return(0,r.kt)(c,(0,i.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"apple-health"},"Apple Health"),(0,r.kt)("p",null,"These Sahha SDK collects health data from Apple Health."),(0,r.kt)("img",{src:a(8292).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"HealthKit provides a central repository for health and fitness data on iPhone and Apple Watch. With the user\u2019s permission, apps communicate with the HealthKit store to access and share this data. Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"enableSensors")," method of the Sahha SDK to show a user permission dialog for your app."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/healthkit"},"https://developer.apple.com/documentation/healthkit")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Because health data may contain sensitive, personal information, apps must receive permission from the user to read data from or write data to the HealthKit store. They must also take steps to protect that data at all times. For more information, see ",(0,r.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/healthkit/protecting_user_privacy"},"Protecting user privacy"),".")),(0,r.kt)("img",{src:a(55213).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"enable-healthkit"},"Enable HealthKit"),(0,r.kt)("p",null,"Before you can use HealthKit, you must enable the HealthKit capabilities for your app."),(0,r.kt)("p",null,"You add capabilities to your app using the Signing & Capabilities pane of the project editor."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-1"},"Step 1"),(0,r.kt)("p",null,"In the Project navigator of the main window, select the project \u2014 the root group with the same name as your app \u2014 and in the project editor that appears, select the appropriate target and then click the Signing & Capabilities tab."),(0,r.kt)("img",{src:a(19368).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-2"},"Step 2"),(0,r.kt)("p",null,"In the toolbar, click the Library button (+) to open the Capabilities library. Alternatively, click + Capability to the left of the build configurations, or choose Editor > Add Capability. The Capabilities library displays only the capabilities available to the target platform and your program membership. Select a capability in the list to view its description on the right."),(0,r.kt)("img",{src:a(51429).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-3"},"Step 3"),(0,r.kt)("p",null,"Select ",(0,r.kt)("inlineCode",{parentName:"p"},"HealthKit")," from the list of capabilities."),(0,r.kt)("img",{src:a(89401).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-4"},"Step 4"),(0,r.kt)("p",null,"After you add the HealthKit capability, Xcode links the HealthKit framework to your target and updates the target\u2019s entitlements file to include the HealthKit Entitlement. If Xcode automatically manages the signing of your app, it also enables HealthKit for your app\u2019s App ID."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"background-delivery"},"Background Delivery"),(0,r.kt)("p",null,"In order for the Sahha SDK to passively collect health data, your app will need to enable background delivery for HealthKit."),(0,r.kt)("p",null,"To enable HealthKit run even while your app is in the background, perform the following:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select your project in Xcode\u2019s Project navigator.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select the app\u2019s target from the Targets list.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the Signing & Capabilities tab in the project editor.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Find the HealthKit capability.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enable the nested Background Delivery capability."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Xcode adds the ",(0,r.kt)("inlineCode",{parentName:"strong"},"com.apple.developer.healthkit.background-delivery")," entitlement to the target\u2019s entitlements file.")),(0,r.kt)("img",{src:a(77037).Z}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"background-modes"},"Background Modes"),(0,r.kt)("p",null,"In order for the Sahha SDK to send health data to the Sahha API even while your app is in the background, you will need to enable the background modes capability."),(0,r.kt)("p",null,"You add capabilities to your app using the Signing & Capabilities pane of the project editor."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-1-1"},"Step 1"),(0,r.kt)("p",null,"In the Project navigator of the main window, select the project \u2014 the root group with the same name as your app \u2014 and in the project editor that appears, select the appropriate target and then click the Signing & Capabilities tab."),(0,r.kt)("img",{src:a(19368).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-2-1"},"Step 2"),(0,r.kt)("p",null,"In the toolbar, click the Library button (+) to open the Capabilities library. Alternatively, click + Capability to the left of the build configurations, or choose Editor > Add Capability. The Capabilities library displays only the capabilities available to the target platform and your program membership. Select a capability in the list to view its description on the right."),(0,r.kt)("img",{src:a(51429).Z,style:{height:512}}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-3-1"},"Step 3"),(0,r.kt)("p",null,"Select ",(0,r.kt)("inlineCode",{parentName:"p"},"Background Modes")," from the list of capabilities."),(0,r.kt)("img",{src:a(18701).Z,style:{height:512}}),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Xcode adds the UIBackgroundModes array to your app\u2019s Info.plist file, if it isn\u2019t already present, and uses the modes you select to populate the array with the necessary values.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"step-4-1"},"Step 4"),(0,r.kt)("p",null,"In the Signing & Capabilities tab of the Project Navigator, select these values under the Background Modes capability:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Background Fetch"),(0,r.kt)("li",{parentName:"ul"},"Background processing")),(0,r.kt)("img",{src:a(36016).Z}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"request-access"},"Request access"),(0,r.kt)("p",null,"HealthKit uses a fine-grained authorization mechanism to help protect the user\u2019s privacy; your app must request permission to read and, optionally, write each individual sample type it supports."),(0,r.kt)("p",null,"Before prompting the user for their permission, you must configure your app to include one or more purpose strings, which accurately and concisely describe why the app needs to read the user\u2019s health data, write health data to their HealthKit store, or both. The presence of these purpose strings is an App Store requirement for any app that integrates with HealthKit. The system displays this information to the user when requesting their permission, along with the specific sample types that your app needs to access, which helps them make an informed decision."),(0,r.kt)("p",null,"Follow these steps to add the purpose string for reading health data to your app\u2019s target:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In the Project navigator, select your target\u2019s Info.plist file.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Move the mouse pointer over the \u201cInformation Property List\u201d key.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the Add button (+) that appears.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Choose \u201cPrivacy - Health Share Usage Description\u201d.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Double-click the Value column to the right of the key and enter your app\u2019s purpose string."))),(0,r.kt)("img",{src:a(25390).Z}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"30-day-read-restriction"},"30-day read restriction"),(0,r.kt)("p",null,"Applications can read data from Apple Health for up to 30 days prior to when any permission was first granted."),(0,r.kt)("p",null,"However, if a user deletes your app, the permission history is lost. If the user reinstalls your app and grants permission again, your app can read data from Apple Health up to 30 days prior to that new date."),(0,r.kt)("h3",{id:"example"},"Example"),(0,r.kt)("p",null,"If a user first granted read permission to your application on March 30, 2023, the earliest data your app could read back would be from February 28, 2023 onwards."),(0,r.kt)("p",null,"The user then deletes your app on May 10, 2023. The user decides to reinstall it on May 15, 2023 and grant read permission. The earliest date your app can now read data from is April 15, 2023."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"locked-restriction"},"Locked restriction"),(0,r.kt)("p",null,"Reading data with Apple Health is restricted while the device is locked. This restriction is in place to further strengthen user privacy. This assures users that Apple Health does not have read access to user data while the device is locked. As soon as the user unlocks the device, Apple Health can sync data that was recorded while the device was locked."))}d.isMDXComponent=!0},8292:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_1-20a1744541683d6c9914c696588ceea7.png"},55213:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_2-8d17ce8287ef5d80e01f495e838eb6c8.png"},77037:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_background_delivery-cd872faddf1cfd3d0637a67c14847099.png"},36016:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_background_modes-beeee481723f0f6de8e8d635d68d859f.png"},19368:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_capability_1-3622a9a8f79dab11a772660b754fe62c.png"},51429:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_capability_2-6824cfc86121191310ba56a5c7bbe485.png"},89401:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_capability_3-bded691407867100ee98a78966382bee.png"},18701:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_capability_3a-a839f6a0bcf6209ac5ae4cb5031b2532.png"},25390:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/hk_share_usage-4e6d1c9fa5311f964e14295baab75af4.png"}}]);